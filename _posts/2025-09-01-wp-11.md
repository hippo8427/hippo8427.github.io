---
title: Weekly Paper 11  
date: 2025-09-01 
layout: single  
---

<br>

## 📌 관계형 데이터베이스의 무결성이란?

### 🔍 개념 정리
* **무결성(Integrity)** 은 데이터베이스에 저장된 데이터의 **정확성(Accuracy)** 과 **일관성(Consistency)** 을 보장하기 위한 제약 조건입니다.  
* 잘못된 데이터 입력이나 참조 오류를 방지하여 데이터 신뢰성을 확보하는 핵심 개념입니다.

<br>

| 무결성 종류          | 설명 |
|-------------------|------|
| **개체 무결성(Entity Integrity)** | 기본 키(Primary Key)는 `NULL` 값이나 중복된 값을 가질 수 없음 |
| **참조 무결성(Referential Integrity)** | 외래 키(Foreign Key)는 반드시 참조하는 테이블의 기본 키 값과 일치하거나 `NULL` 이어야 함 |
| **도메인 무결성(Domain Integrity)** | 특정 속성(Attribute)은 정의된 데이터 타입, 범위, 규칙을 따라야 함 |
| **사용자 정의 무결성(User-Defined Integrity)** | 업무 규칙에 따라 사용자가 직접 정의하는 제약 조건 (예: 아이디는 이메일 형식이어야 한다) |

<br>

#### 📍 예시 구조

```sql
-- 개체 무결성: PK는 NULL 불가 & 중복 불가
CREATE TABLE Users (
  id INT PRIMARY KEY,
  email VARCHAR(100) UNIQUE NOT NULL
);

-- 참조 무결성: FK는 반드시 참조 테이블 값과 일치해야 함
CREATE TABLE Orders (
  id INT PRIMARY KEY,
  user_id INT,
  FOREIGN KEY (user_id) REFERENCES Users(id)
);

-- 도메인 무결성: CHECK 제약 조건
CREATE TABLE Products (
  id INT PRIMARY KEY,
  price DECIMAL CHECK (price > 0)
);
```
#### 📍 장점
- 데이터 정확성과 신뢰성을 유지
- 잘못된 데이터 입력 방지
- 시스템 오류나 논리적 버그 최소화

#### 📍 단점
- 제약 조건이 많아지면 삽입/수정 성능이 저하될 수 있음
- 단순한 테스트 환경에서는 제약이 다소 번거롭게 느껴질 수 있음

<br><br>

## 📌 관계형 데이터베이스의 마이그레이션이란?

### 🔍 개념 정리

* 마이그레이션(Migration) 은 데이터베이스의 스키마 구조 변화(생성, 수정, 삭제)를 관리하는 과정입니다.  
* 버전 관리처럼 데이터베이스의 이력을 추적하고, 여러 개발자가 협업할 때 스키마 변경을 안전하게 적용할 수 있습니다.

<br>

| 항목        | 설명                                              |
| --------- | ----------------------------------------------- |
| **목적**    | DB 스키마의 변경 이력 추적 및 버전 관리                        |
| **사용 도구** | Sequelize, TypeORM, Prisma, Flyway, Liquibase 등 |
| **적용 방법** | 마이그레이션 파일 생성 → DB에 적용(Up) → 필요 시 롤백(Down)       |
| **예시 상황** | 새로운 테이블 추가, 컬럼 타입 변경, 인덱스 생성, 제약 조건 추가 등        |

<br>

#### 📍 예시 구조 (Prisma)

```sql
# 마이그레이션 생성
npx prisma migrate dev --name add_users_table

# DB에 적용된 마이그레이션 확인
npx prisma migrate status

-- 생성된 마이그레이션 SQL 예시
CREATE TABLE Users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(100) NOT NULL,
  password VARCHAR(255) NOT NULL
);
```

#### 📍 장점
- 스키마 변경 이력을 추적 가능
- 협업 시 충돌 최소화
- 배포 환경에서도 안정적으로 DB 구조 변경 가능

#### 📍 단점
- 관리가 소홀하면 버전 충돌 발생
- 잘못된 마이그레이션은 롤백이 까다로울 수 있음
- 작은 프로젝트에서는 오히려 관리 부담이 될 수 있음
