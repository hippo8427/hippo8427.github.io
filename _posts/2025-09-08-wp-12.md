---
title: Weekly Paper 12  
date: 2025-09-08 
layout: single  
---

<br>

## 📌 1:1 관계(One-to-One)

### 🔍 개념 정리
- 한 테이블의 행이 다른 테이블의 행과 정확히 하나씩 연결되는 관계  
- **방법**: FK + `UNIQUE` 제약, 혹은 PK 공유  

<br>

#### 📍 예시 (고유 FK 방식)

```sql
CREATE TABLE Users (
  id SERIAL PRIMARY KEY,
  email TEXT UNIQUE NOT NULL
);

CREATE TABLE UserProfiles (
  id SERIAL PRIMARY KEY,
  user_id INT UNIQUE NOT NULL,  // 유니크로 1:1 설정
  bio TEXT,
  FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE
);
```
- user_id에 UNIQUE를 주어 한 유저당 최대 1개의 프로필만 연결됨
- UNIQUE를 빼면 1:N 관계

<br><br>
  
## 📌 M:N 관계(Many-to-Many)

### 🔍 개념 정리

두 테이블이 서로 여러 개의 관계를 가질 수 있음

방법: 교차 테이블(Join Table) 생성

<br>
 
#### 📍 예시 (학생–수강기록–과목)

```sql
CREATE TABLE Students (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL
);

CREATE TABLE Courses (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL
);

// 두 테이블을 연결해주는 중간 테이블
CREATE TABLE Enrollments (
  student_id INT NOT NULL,
  course_id INT NOT NULL,
  PRIMARY KEY (student_id, course_id), // 복합 PK 설정
  FOREIGN KEY (student_id) REFERENCES Students(id) ON DELETE CASCADE,
  FOREIGN KEY (course_id) REFERENCES Courses(id) ON DELETE CASCADE
);
```
- PRIMARY KEY (student_id, course_id)로 중복 관계 차단

### 📝요약

#### 1:1 관계

한쪽의 행이 다른 쪽 행과 반드시 1:1로 연결됨

- FK + UNIQUE 제약 (유연성 있음)

- 기존 PK를 없애고 FK를 PK로 사용 (무결성 강력) 

- 활용 예시: 사용자 ↔ 프로필, 고객 ↔ 주소

#### M:N 관계

두 테이블이 다대다로 연결될 때는 반드시 교차 테이블 필요

- 교차 테이블은 두 FK를 묶어 합성 PK로 설정 → 중복 관계 방지

- 활용 예시: 학생 ↔ 과목 (수강 기록), 사용자 ↔ 역할

<br>

> 1:1은 FK+UNIQUE 또는 PK 공유로 연결<br>
> M:N은 교차 테이블+합성 PK로 설계하는 것이 정석이다.
